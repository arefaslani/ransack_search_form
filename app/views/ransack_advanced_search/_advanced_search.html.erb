<%= javascript_include_tag 'ransack_advanced_search/application' %>

<h1>Advanced User Search</h1>

<%= search_form_for(@search, url: search_url, html: { method: :post }) do |f| %>

  <% setup_search_form f %>

  <fieldset>
    <legend>Sorting</legend>
    <%= f.sort_fields do |s| %>
      <%= render 'ransack_advanced_search/sort_fields', f: s %>
    <% end %>
    <%= button_to_add_fields "Add Sort", f, :sort %>
  </fieldset>

  <fieldset>
    <legend>Condition Groups</legend>
    <%= f.grouping_fields do |g| %>
      <%= render 'ransack_advanced_search/grouping_fields', f: g %>
    <% end %>
    <%= button_to_add_fields "Add Condition Group", f, :grouping %>
  </fieldset>

  <%= label_tag :distinct, 'Return distinct records?' %>
  <%= check_box_tag :distinct, '1', params[:distinct].to_i == 1 %>
  <%= f.submit %>
<% end %>


<script>
  $(document).ready(function () {
    <%= yield(:ransack_setup) %>
  });
</script>
